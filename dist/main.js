(()=>{"use strict";const t={0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J"};function e(t,e){return Math.floor(Math.random()*(e-t)+t)}function s(s,i){return{name:s,isComputer:i,board:{grid:[new Array(10),new Array(10),new Array(10),new Array(10),new Array(10),new Array(10),new Array(10),new Array(10),new Array(10),new Array(10)],ships:[],placeShip(t,e,s){if(!(e[0]!==s[0]&&e[1]!==s[1]||Math.abs(e[0]-s[0])+1!==t&&Math.abs(e[1]-s[1])+1!==t)){const i={length:t,hits:0,hit(){this.hits+=1},getLength(){return this.length},getHits(){return this.hits},isSunk(){return this.length===this.hits}};let r=[];if(e[1]===s[1]){let t=e[0],a=s[0];t>a&&([t,a]=[a,t]);for(let s=t;s<=a;s++)this.grid[s][e[1]]=i,r.push([s,e[1]])}else{let t=e[1],a=s[1];t>a&&([t,a]=[a,t]);for(let s=t;s<=a;s++)this.grid[e[0]][s]=i,r.push([e[0],s])}this.ships.push({ship:i,cells:r})}},getInfo(t){return this.grid[t[0]][t[1]]},recieveAttack(t){return void 0===this.grid[t[0]][t[1]]?(this.grid[t[0]][t[1]]="miss","Miss!"):"miss"===this.grid[t[0]][t[1]]?void 0:(this.grid[t[0]][t[1]].hit(),this.grid[t[0]][t[1]]="hit","Hit!")},allShipsSunk(){return 0===this.ships.filter((t=>!t.ship.isSunk())).length}},fire(s,i=[e(0,10),e(0,10)]){let r=Number(i[0]),a=Number(i[1]);for(;"miss"===s.board.getInfo([r,a])||"hit"==s.board.getInfo([r,a]);)r=e(0,10),a=e(0,10);return"Hit!"===s.board.recieveAttack([r,a])?`Hit at ${t[r]}${a+1}!`:`Miss at ${t[r]}${a+1}!`}}}const i=document.getElementById("root"),r=document.createElement("div");r.id="player-grid",r.classList.add("game-grid");const a=document.createElement("div");a.id="opponent-grid",a.classList.add("game-grid");for(let t=0;t<10;t++)for(let e=0;e<10;e++){let s=document.createElement("div");s.dataset.x=t,s.dataset.y=e,s.classList.add("player"),s.classList.add("cell"),r.appendChild(s);let i=document.createElement("div");i.dataset.x=t,i.dataset.y=e,i.classList.add("opponent"),i.classList.add("cell"),a.appendChild(i)}i.appendChild(r),i.appendChild(a),function(t="Player",e="Computer",i=!0){const a=s(t,!1),d=s(e,i);a.board.placeShip(3,[0,0],[0,2]),d.board.placeShip(4,[5,6],[8,6]),a.board.ships.forEach((t=>{t.cells.forEach((t=>{document.querySelector(`.player[data-x="${t[0]}"][data-y="${t[1]}"]`).classList.add("ship")}))})),d.board.ships.forEach((t=>{t.cells.forEach((t=>{document.querySelector(`.opponent[data-x="${t[0]}"][data-y="${t[1]}"]`).classList.add("ship")}))})),r.addEventListener("click",(t=>{let e=a.fire(d,[t.target.dataset.x,t.target.dataset.y]);console.log(e),e.includes("Miss")?(t.target.classList.add("miss"),t.target.innerText="O"):e.includes("Hit")&&(t.target.classList.add("hit"),t.target.innerText="X")}))}()})();